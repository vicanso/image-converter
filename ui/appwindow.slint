import { Button, VerticalBox, ListView, GridBox, ScrollView, HorizontalBox } from "std-widgets.slint";

component TableView inherits Rectangle {
    in property <[string]> columns;
    in property <[[string]]> values;
    in property <bool> processing;
    callback show-open-dialog;

    VerticalBox {
        HorizontalLayout {
            width: parent.width - 28px;
            HorizontalLayout{
                width: 40px;
                Text {
                    text: " ";
                }
                Rectangle {
                    width: 1px;
                    background: gray;
                }
            }
            HorizontalLayout{
                padding-left: 10px;
                Text {
                    text: @tr("File");
                }
                Rectangle {
                    width: 1px;
                    background: gray;
                }
            }
            HorizontalLayout{
                width: 80px;
                padding-left: 10px;
                Text {
                    text: @tr("Size");
                }
                Rectangle {
                    width: 1px;
                    background: gray;
                }
            }
            HorizontalLayout{
                padding-left: 10px;
                width: 80px;
                Text {
                    text: @tr("Savings");
                }
                Rectangle {
                    width: 1px;
                    background: gray;
                }
            }
            HorizontalLayout{
                width: 80px;
                padding-left: 10px;
                Text {
                    text: @tr("Dssim");
                }
            }
        }
        ListView {
            for item in values : Rectangle { 
                padding-top: 10px;
                padding-bottom: 10px;
                HorizontalLayout {
                    padding-bottom: 10px;
                    Text {
                        width: 40px;
                        text: item[0];
                    }
                    HorizontalLayout{
                        padding-left: 8px;
                        Text {
                            text: item[1];
                        }
                    }
                    HorizontalLayout {
                        padding-left: 10px;
                        Text {
                            width: 70px;
                            text: item[2];
                        }
                    }
                    HorizontalLayout {
                        padding-left: 10px;
                        Text {
                            width: 70px;
                            text: item[3];
                        }
                    }
                    HorizontalLayout {
                        padding-left: 10px;
                        Text {
                            width: 70px;
                            text: item[4];
                        }
                    }
                }
            }
        }
        // Rectangle {
        //     background: red;
        //     height: 1px;
        // }
        HorizontalLayout {
            Button {
                width: 40px;
                text: processing ? "..." : "+";
                clicked => { show-open-dialog(); }
            }
        }
    }
}

export component AppWindow inherits Window {
    preferred-width: 700px;
    preferred-height: 500px;
    callback show-open-dialog;
    title: @tr("Image Converter");
    in property <[string]> columns;
    in property <[[string]]> values;
    in property <bool> processing;
    default-font-size: 13px;
    default-font-weight: 400;
    TableView {
        show-open-dialog => { show-open-dialog(); }
        columns: columns;
        values: values;
        processing: processing;
    }
}
